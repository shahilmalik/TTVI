<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Touch Typing Home</title>
    <!-- <link rel="stylesheet" href="styles.css"> -->
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    {% extends 'navbar.html' %} {% block content %} {% load static %}
    <style>
      body {
        font-family: Cambria, Cochin, Georgia, Times, "Times New Roman", serif;
        margin: 0;
        padding: 0;
      }

      .container {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 90vh;
        background-image: url("{% static 'images/background2.jpeg' %}");
        background-size: 120% 120%;
        background-color: #000000;
      }

      .typing-container {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 40%;
        height: 20%;
        background-color: #31313152;
        border: 0.5vh solid #ffffff;
        margin-bottom: 20px;
        font-size: 1.5em;
        color: #ffffff;
        border-radius: 1vh;
        backdrop-filter: blur(5px);
      }

      .keyboard {
        /* background-color: aqua; */
        transform: translateZ(0);
        width: 65%;
      }
      .keyboard1 {
        /* background-color: aqua; */
        height: 30%;
        display: grid;
        grid-template-columns: repeat(14, 1fr);
        grid-gap: 5px;
        margin-top: 5px;
      }

      .keyboard2 {
        height: 30%;
        display: grid;
        grid-template-columns: repeat(13, 1fr);
        grid-gap: 5px;
        margin-top: 5px;
        justify-content: center;
      }

      .keyboard3 {
        height: 30%;
        display: grid;
        grid-template-columns: repeat(12, 1fr);
        grid-gap: 5px;
        margin-top: 5px;
      }

      .keyboard4 {
        height: 30%;
        display: grid;
        grid-template-columns: repeat(11, 1fr);
        grid-gap: 5px;
        margin-top: 5px;
        justify-content: center;
        /* background-color: aquamarine; */
      }

      .key {
        padding: 10px;
        text-align: center;
        background-color: rgba(0, 0, 0, 0.185);
        border: solid;
        border-color: #ffffff;
        border-width: 0.5vh;
        color: #ffffff;
        font-weight: bold;
        cursor: pointer;
        border-radius: 15px;
        backdrop-filter: blur(2px);
        transition: 0.29s;
      }
      .rightpress {
        border-color: green;
      }

      .key:hover {
        backdrop-filter: blur(15px);
        background-color: #00000077;
      }

      .key-alt2,
      .key-ctrl2 {
        color: #000000;
        position: relative;
        left: 521%;
        cursor: pointer;
        border-radius: 2px;
        background-color: rgba(194, 98, 19, 0.6);
        border: solid;
        border-color: #6d6d6d;
        border-width: 3px;
      }
      .poptext {
        margin-right: 10px;
        margin-left: 10px;
        padding: 4px 6px;
        background: rgba(255, 255, 255, 0.5);
        border: 0;
        outline: pointer;
        font-size: 16px;
        font-weight: 500;
        border-radius: 6px;
        cursor: pointer;
        transition: 0.25s;
      }
      .poptext:hover {
        background: rgba(255, 255, 255, 0.5);
        /* color: white; */
        border: solid;
        border-color: rgba(255, 255, 255, 0.9);
      }
      .popup {
        width: 300px;
        height: 150px;
        background: linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.1),
          rgba(255, 255, 255, 0)
        );
        backdrop-filter: blur(25px);
        -webkit-backdrop-filter: blur(10px);
        border-radius: 10px;
        position: absolute;
        top: 0;
        left: 50%;
        transform: translate(-50%, -50%) scale(0.1);
        text-align: center;
        padding: 0 30px 30px;
        color: rgb(0, 0, 0);
        border-color: rgba(255, 255, 255, 0.2);
        visibility: hidden;
        transition: transform 0.5s, top 0.5s;
        border-style: solid;
      }
      .open-popup {
        visibility: visible;
        transform: translate(-50%, -50%) scale(1);
        top: 14%;
      }
      .area {
        margin-top: 12px;
      }
      .popup h2 {
        font-size: 30px;
        margin-top: 10px;
        margin-bottom: 10px;
      }
      .popup p {
        font-size: 15px;
        margin-bottom: 40px;
      }
      .hide {
        opacity: 0;
        pointer-events: none; /* Disable pointer events for hidden element */
      }
      .cont {
        display: flex;
        justify-content: center;
        text-align: center;
      }
    </style>
  </head>
  <body>
    <h3 id="beg">
      <div class="cont">
        <p>
          The longest key in the middle of the last row is 'space'. <br />
          'space' to go further in the lecture"
        </p>
      </div>
      <ol id="dynamicList">
        <!-- <li>The longest key in the middle of the last row is 'space'.</li>
          <li>The longest key in the middle of the last row is 'space'.</li> -->
      </ol>
    </h3>

    <div id="kbui" class="container">
      <div class="keyboard">
        <div class="keyboard1">
          <button class="key">TAB</button>
          <button id="q" class="key">Q</button>
          <button id="w" class="key">W</button>
          <button id="e" class="key">E</button>
          <button id="r" class="key">R</button>
          <button id="t" class="key">T</button>
          <button id="y" class="key">Y</button>
          <button id="u" class="key">U</button>
          <button id="i" class="key">I</button>
          <button id="o" class="key">O</button>
          <button id="p" class="key">P</button>
          <button id="]" class="key">[</button>
          <button id="]" class="key">]</button>
          <button id="bsla" class="key">\</button>
        </div>
        <div class="keyboard2">
          <button class="key">CAPS LOCK</button>
          <button id="a" class="key">A</button>
          <button id="s" class="key">S</button>
          <button id="d" class="key">D</button>
          <button id="f" class="key">F</button>
          <button id="g" class="key">G</button>
          <button id="h" class="key">H</button>
          <button id="j" class="key">J</button>
          <button id="k" class="key">K</button>
          <button id="l" class="key">L</button>
          <button id="semi" class="key">;</button>
          <button id="quo" class="key">'</button>
          <button id="ret" class="key">RETURN</button>
        </div>
        <div class="keyboard3">
          <button class="key">SHIFT</button>
          <button id="z" class="key">Z</button>
          <button id="x" class="key">X</button>
          <button id="c" class="key">C</button>
          <button id="v" class="key">V</button>
          <button id="b" class="key">B</button>
          <button id="n" class="key">N</button>
          <button id="m" class="key">M</button>
          <button id="com" class="key">,</button>
          <button id="dot" class="key">.</button>
          <button id="sla" class="key">/</button>
          <button class="key">SHIFT</button>
        </div>
        <div class="keyboard4">
          <!-- <button class="key">/</button> -->
          <button class="key">CONTROL</button>
          <button class="key">WINDOWS</button>
          <button class="key">ALT</button>
          <button id="spc" style="width: 619%" class="key" id="spaceKey 5fr">
            SPACE
          </button>
          <!-- <button class="key key-alt2">ALT</button>
          <button class="key key-ctrl2">CONTROL</button>  -->
        </div>

        <!-- Include all other keys -->
        <!-- For brevity, including only a few keys -->
        <div class="popup" id="popup">
          <h2 id="pop-content"></h2>
          <p class="desc">
            Press Space, Once to continue to lessons. Twice to retake the test.
          </p>
          <div class="area">
            <button type="button" class="poptext" onclick="redirectToHome()">
              Continue
            </button>
            <button type="button" class="poptext" onclick="reloadTest()">
              Retake
            </button>
          </div>
        </div>
      </div>
    </div>
    <!-- <script src="{% static 'js/beginner-guide.js' %}"></script> -->
    <!-- <script src="{% static 'js/placement-assist.js' %}"></script> -->

    <!-- Your HTML code ... -->

    <script>
      var subLevel = 1;

      // Function to check conditions based on subLevel
      function checkConditions() {
        var set1 = ["f", "d", "s", "a"];
        set1.forEach(function (id) {
          var element = document.getElementById(id);
          if (element) {
            element.classList.remove("hide");
          }
        });

        function hideAllButtons() {
          var buttons = document.querySelectorAll(".keyboard .key");

          // Add the "hide" class to each button
          buttons.forEach(function (button) {
            button.classList.add("hide");
          });
        }

        function showAllButtons() {
          var buttons = document.querySelectorAll(".keyboard .key");

          // Remove the "hide" class from each button
          buttons.forEach(function (button) {
            button.classList.remove("hide");
          });
        }

        var level = 1;
        var hide1 = false;
        var hide2 = false;

        var keyboard = document.getElementById("kbui");
        var beg = document.getElementById("beg");

        var scriptPlacementAssist = document.createElement("script");
        scriptPlacementAssist.id = "placement-assist-script"; // Assign an ID to identify the script

        // Remove existing script with the same ID if it exists
        var existingScript = document.getElementById("placement-assist-script");
        if (existingScript) {
          existingScript.parentNode.removeChild(existingScript);
        }

        if (subLevel === 1) {
          scriptPlacementAssist.src = '{% static "js/beginner-guide.js" %}';
          hide2 = false;
          // hide1 = true;
          hideAllButtons();
        } else if (subLevel === 2) {
          console.log("enter sl 2");
          hide2 = true;
          hide1 = false;
          showAllButtons();
          scriptPlacementAssist.src = '{% static "js/placement-assist.js" %}';
        } else if (subLevel == 3) {
          console.log("entering sl 3");
          scriptPlacementAssist.src = '{% static "js/check-position.js" %}';
        }

        // Check if the script source is set before appending it to the head
        if (scriptPlacementAssist.src) {
          document.head.appendChild(scriptPlacementAssist);
        } else {
          console.error("Neither subLevel nor level conditions were met.");
        }

        if (hide1) {
          console.log("Hiding the keyboard element");
          keyboard.classList.add("hide");
        }
        if (hide2) {
          console.log("beg gudide");
          beg.classList.add("hide");
        }
      }

      document.addEventListener("DOMContentLoaded", checkConditions);

      // Update subLevel (e.g., triggered by beginner.js)
      function updateSubLevel(newSubLevel) {
        subLevel = newSubLevel;
        // Call the checkConditions function whenever subLevel is updated
        checkConditions();
      }
    </script>

    <!-- Your HTML code ... -->

    {% endblock %}
  </body>
</html>
